<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Functional Programming Exchange 2013 | Maciek's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/technology/>Tech</a></li><li><a href=/travel/>Travel</a></li><li><a href=/cooking/>Cook</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Functional Programming Exchange 2013</span></h1></div><main><p>After slightly disappointing FPX 2012, this year’s edition of Skills Matter-run one day gathering of functional programming enthusiasts bounced back with promising speaker line-up. The participant numbers were up compared to last year and seem to have even exceeded the excellent 2011 edition.</p><h2 id=adventures-with-types-in-haskell>Adventures with Types in Haskell</h2><p>If anyone had any doubt about the reputation <strong>Simon Peyton Jones</strong> enjoys in fuctional programming community, the enthusiastic welcome he received must have dispelled it. His talk was, as usual, entertaining and fast-paced, but at no expense of clarity.</p><p>Strong typing is the most succesful method of formal verification of program semantics. Despite their unquestionable success, type systems are not without issues: their job is to restrict the set of allowed programs, but this restriction does not always coincide with the intents of the programmers:</p><p><img src=fpe.png alt="Venn diagram of programs we want to write and programs allowed by the type system, with a small overlap"></p><p>It is particularly frustrating when the type system gets in our way by disallowing a working program. Simon ran through a number of examples where this happened and prompted advances in Haskell’s type system. The features discussed were:</p><ul><li><strong>type classes</strong>: some functions, e.g. <code>sort :: [a] -> [a]</code>, are “nearly polymorphic”, i.e. in order for us to be able to write them polymorphically, we need to restrict the set of admissible types to ones that support specific operations (comparison in the case of <code>sort</code>). Type classes provide this mechanism: if we write the type of <code>sort</code> as <code>Ord a => [a] -> [a]</code> we can make use of the operations provided by <code>Ord</code> type class in <code>sort</code>’s definition.</li><li><strong>higher kinds</strong>: we would like to abstract the notion of mapping values over arbitrary “container”, e.g. instead of having two separate functions, <code>mapList :: (a -> b) -> [a] -> [b]</code> and <code>mapTree :: (a -> b) -> Tree a -> Tree b</code> we would prefer <code>map :: Functor f => (a -> b) -> f a -> f b</code>. <code>Functor</code> here is a type class whose instances are not <em>types</em> (of kind <code>*</code>), but <em>type constructors</em> (of kind <code>* -> *</code>).</li><li><strong>GADTs</strong> (generalised algebraic data types): when defining data type for terms we would like to be able to say what type the term evaluates to, so that writing evaluation function is straightforward. GADTs enable us to do that by allowing individual data constructors to produce arbitrary types, as long as the outermost type is the type being defined:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#000;font-weight:700>data</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#000;font-weight:700>::</span> <span style=color:#000;font-weight:700>*</span> <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#000;font-weight:700>*</span> <span style=color:#000;font-weight:700>where</span>
</span></span><span style=display:flex><span>  <span style=color:#458;font-weight:700>Lit</span>    <span style=color:#000;font-weight:700>::</span> <span style=color:#458;font-weight:700>Int</span>                           <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Int</span>
</span></span><span style=display:flex><span>  <span style=color:#458;font-weight:700>Succ</span>   <span style=color:#000;font-weight:700>::</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Int</span>                      <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Int</span>
</span></span><span style=display:flex><span>  <span style=color:#458;font-weight:700>IsZero</span> <span style=color:#000;font-weight:700>::</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Int</span>                      <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Bool</span>
</span></span><span style=display:flex><span>  <span style=color:#458;font-weight:700>Cond</span>   <span style=color:#000;font-weight:700>::</span> <span style=color:#458;font-weight:700>Term</span> <span style=color:#458;font-weight:700>Bool</span> <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> a <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> a <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>Term</span> a
</span></span></code></pre></div><ul><li><strong>type families</strong> (type functions): type classes with multiple parameters enable us to specify that e.g. addition can operate on arguments of two different types; but how can we say what the result type of such addition should be? With type families we can declare that such a type can be derived from the type class parameters:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#000;font-weight:700>class</span> <span style=color:#458;font-weight:700>GNum</span> a b <span style=color:#000;font-weight:700>where</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>type</span> <span style=color:#458;font-weight:700>SumT</span> a b <span style=color:#000;font-weight:700>::</span> <span style=color:#000;font-weight:700>*</span>        <span style=color:#998;font-style:italic>-- type-level function</span>
</span></span><span style=display:flex><span>  (<span style=color:#000;font-weight:700>+</span>) <span style=color:#000;font-weight:700>::</span> a <span style=color:#000;font-weight:700>-&gt;</span> b <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#458;font-weight:700>SumT</span> a b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>instance</span> <span style=color:#458;font-weight:700>GNum</span> <span style=color:#458;font-weight:700>Int</span> <span style=color:#458;font-weight:700>Float</span> <span style=color:#000;font-weight:700>where</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>type</span> <span style=color:#458;font-weight:700>SumT</span> <span style=color:#458;font-weight:700>Int</span> <span style=color:#458;font-weight:700>Float</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#458;font-weight:700>Float</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>-- ...</span>
</span></span></code></pre></div><p>In recent years there has been an explosion of innovation in type systems. The ultimate goal of all this work is enabling programmers to say what they mean. In Simon’s opinion, one of the main reasons for recent growth in Haskell’s popularity is its rich, but still usable, type system.</p><p><a href=https://skillsmatter.com/skillscasts/3842-keynote-3842>Adventures with types | SkillsCast</a></p><h2 id=lift-30-across-time-and-address-space>Lift 3.0: Across Time and Address Space</h2><p><strong>David Pollak</strong> delivered a preview of what can be expected from next major release of <a href=http://liftweb.net>Lift web framework</a>. Not dealing with web development on day-to-day basis I am not best qualified to judge how much of an improvement Javascript sources, cross-HTTP actors, markdown templating or dynamic reload of changed classes are going to be. What is clear is that Lift is quite different from most other web frameworks out there, not least as a result of strong opinions held by its creator: according to David, Akka actor and future implementations are of poor quality, hence the need for Lift’s own version of these abstractions. Another mark of David’s personality on the new Lift is integration of his other recent project, dataflow language <a href=http://blog.visi.la/>Visi</a>, into Lift page templates. While this strong-mindedness does alienate some in the wider Scala community, Lift is still one of the most popular Scala web frameworks and has a dedicated following, so it must get some things right.</p><p><a href=https://skillsmatter.com/skillscasts/3844-across-time-and-address-space-lift-3-0>Across Time and Address Space: Lift 3.0 | SkillsCast</a></p><h2 id=elnode-the-evented-io-web-server>Elnode: The Evented IO Web Server</h2><p>Emacs afficionados sometimes go to such great lengths to get their beloved piece of software to perform as something it was not originally designed for, that it is really difficult to explain their motivation to the non-initiated. One such case is definitely <strong>Nic Ferrier’s</strong> implementation of web server inside Emacs. In an entertaining talk Nic explained how Richard Stallman’s stepping down from long held post of Emacs maintainer opened the floodgate of innovation: a package system (<code>M-x package-install</code>), lexical scoping in Emacs Lisp and server sockets. This last addition enabled Nic to implement <em>elnode</em> – a web server framework in Emacs Lisp. As Emacs is single-threaded, asynchronous processing of HTTP requests is based on callbacks, in the style popularised by Node.js. The audience could experience the joys of Emacs web first hand, by using a chat application served from elnode instance running on Nic’s laptop.</p><p>But why turn Emacs into a web server? To quote George Mallory: “because it’s there”.</p><p><a href=https://skillsmatter.com/skillscasts/3880-elnode-the-evented-io-web-server>Elnode: the evented IO web server | SkillsCast</a></p><h2 id=comparing-scala-and-clojure>Comparing Scala and Clojure</h2><p><strong>Robert Rees</strong> is one of the founders of <a href=http://londonclojurians.org/>London Clojurians community</a> and codes in Scala on daily basis as a part of his job at Guardian. In the table below I attempted to summarise his experiences and impressions of the two languages aspiring to be “the next big thing” in JVM world.</p><table><thead><tr><th>Scala</th><th>Clojure</th></tr></thead><tbody><tr><td>Java++</td><td>Lisp with Java interoperability</td></tr><tr><td>complex, academic – see the type system</td><td>simple, practical – see the data structures</td></tr><tr><td>enterprise-friendly: curly braces, strong Java interoperability</td><td>hippie: no objects, Lisp syntax</td></tr><tr><td>good tooling: Eclipse and IntelliJ both have feature-rich Scala plugins</td><td>poor tool support, most clojurians use Emacs</td></tr><tr><td>performance comparable with Java</td><td>performance sometimes weird</td></tr><tr><td>used by companies and teams with large existing Java investment, big codebase, binary sharing of artifacts</td><td>used by teams that are already polyglot, for software that is service-orientated and communicates over HTTP</td></tr><tr><td>Lift, Scalatra, Play2 and other rich, complete frameworks</td><td>rudimentary web development support from Ring middleware and Compojure</td></tr><tr><td>SBT is one of the best build tools out there</td><td>Leiningen 2 is catching up with SBT</td></tr><tr><td>makes working with existing Java codebase easier</td><td>makes one a better Scala programmer</td></tr></tbody></table><p>Overall it was clear that Robert’s sympathies lied with Clojure, but the talk was balanced and did give Scala credit where it was due.</p><p><a href=https://skillsmatter.com/skillscasts/3883-comparing-scala-and-clojure>Comparing Scala and Clojure | SkillsCast</a></p><h2 id=developing-with-f-in-the-cloud>Developing With F# in The Cloud</h2><p><strong>Adam Granicz</strong>, the CEO of <a href=http://www.intellifactory.com>IntelliFactory</a> presented his company’s latest product, CloudSharper – a web-based IDE for developing web and mobile applications. On initial launch, planned for April 2013, the IDE will support F#, with server-side compilation, intellisense, multi-project capability and other modern conveniences users of development environments are accustomed to. While the videos of interaction with the IDE – there was no live demo – looked impressive, Adam struggled to explain convincingly the advantages of his solution over existing stand-alone .Net IDEs such as Visual Studio or MonoDevelop. Overall, along with the <a href=#lift-3.0-across-time-and-address-space>Lift talk</a>, this one was the least interesting session of the day. In both cases the previews of the products could have been made more relevant to the subject of the conference if the presenters focused on the value added by functional techniques, rather than highlighting specific features that were of interests only to the intended audience of the products.</p><p><a href=https://skillsmatter.com/skillscasts/3873-developing-with-f-in-the-cloud>Developing with F# in the Cloud | SkillsCast</a></p><h2 id=reducing-cognitive-bias-in-design-with-scala>Reducing Cognitive Bias in Design With Scala</h2><p>In the course of his work as the principal architect in <a href=http://www.elemica.com>Elemica</a>, <strong>Paul Dale</strong> learned to appreciate the importance of good communication between the programmers and domain experts. Cognitive bias in its various forms – ambiguity effect, anchoring, attention bias, availability, false consensus, framing effect – presents a major obstacle to achieving this mutual understanding. As a solution to the communication problem, Paul recommended the framework offered by <em>Domain-Driven Design</em>: building and carefully maintaining common vocabulary that reduces the chance of misunderstanding resulting from the aforementioned forms of bias. This is where Scala comes into the picture: case classes are an excellent tool for modeling domain concepts in concise and uncluttered way. Paul’s observation was that this had an empowering effect on the domain experts, who, having realised that they had no trouble understanding the code, were eager to provide relevant business logic in the form of code that built on the model developed in this way. Paul’s other recommendation was to start with the UI as early as possible – an approach facilitated by Lift’s view-first development model.</p><p><a href=https://skillsmatter.com/skillscasts/3846-akka-scala>Reducing cognitive bias in design with Scala | SkillsCast</a></p><h2 id=lexifi-describing-financial-contracts-and-extending-ocaml>LexiFi: Describing Financial Contracts and Extending OCaml</h2><p>Ever since learning about <a href=http://www.lexifi.com/files/resources/MLFiPaper.pdf><em>composing contracts</em> paper</a> I wondered if anyone has commercialised the idea. It turns out that yes: one of the authors, Jean-Marc Eber, founded <a href=http://lexifi.com>LexiFi</a> – a company producing derivatives pricing and management software. <strong>Alain Frisch</strong>, LexiFi’s CTO, talked about the product and how algebraic modeling of financial instruments and construction of term sheets from few generic building block and combinators enables them to add new product treatments to the system in the matter of days.</p><p>LexiFi being a French company, OCaml was the natural choice for implementation language. In the course of development of the system, the company had to modify the compiler to support features they needed, contributing the patches back to the official distribution. Presently, LexiFi’s system is distributed together with the complete, customised OCaml toolchain that allows building and execution of their models on Windows and Unix systems without any additional dependencies. Even the Windows GUI is written in OCaml, utilising a bi-directional OCaml-.Net bridge built specifically for this purpose.</p><p><a href=https://skillsmatter.com/skillscasts/3855-lexifi-describing-financial-contracts-and-extending-ocaml>LexiFi: describing financial contracts and extending OCaml | SkillsCast</a></p><h2 id=f-in-the-open-source-world>F# in the Open Source World</h2><p>F# was designed by <strong>Don Syme</strong> of Microsoft Resarch and over the years has progressed from an experiment to a first-class citizen of Visual Studio offering. As with .Net in its entirety, there is the perception that Microsoft has full control over the language and its implementation. Don appeared at FPX to try and alter this impression, and present the vision of F# ecosystem where Microsoft is just one of many contributors. While the compiler development is not yet open, the drops of source code of official releases are available <a href=http://fsharp.github.com/fsharp/>on Github</a>, as are <a href=http://fsharp.github.com/fsharpbinding/>editor bindings</a> that enable authors of editors and IDEs to provide integration with the compiler. This has resulted in environments such as MonoDevelop, Xamarin Studio and Emacs offering excellent support for F# development. On top of the compiler infrastructure, there is now <a href=http://nuget.org>NuGet</a> – a repository of libraries and extensions that work across development environments. An impressive example of community-built extensions was F# binding to R, built as a type provider, so that R functions could be seamlessly invoked from F# code – including opening a window with scatterplot matrix.</p><p><a href=https://skillsmatter.com/skillscasts/3885-f-in-the-open-source-world-3885>F# in the open source world | SkillsCast</a></p><h2 id=functional-data-storage>Functional Data Storage</h2><p><strong>Greg Young</strong> delivered what probably was the best product demo of the day – and one in which the name of the product has not been mentioned even once. The entire concept of functional data storage, in Greg’s interpretation, was a derivation of ideas from <em>functional reactive programming</em>, <em>NoSQL</em> and <em>event sourcing</em>: what is being stored is not mutable state, but the sequence of events observed by the system. These events can then be interpreted as function invocations: e.g. obtaining current state is possible by taking an initial state and then applying to it in sequence functions represented by all events. In a similar fashion, queries over event stream can be represented as folds (catamorphisms).</p><p>This model makes easy certain queries that are difficult in relational, document and key-value databases; one example could be temporal queries, such as “find all people who tweeted <em>Starbucks</em> and then, within 4 minutes, <em>Happy</em> and <em>Coffee</em>”. However, it also calls for a new query language. Greg presented some operators of such language, with demo based on aptly named <a href=http://geteventstore.com/>Event Store</a> – an event database. While many in the audience might have questioned the choice of Javascript as the query language, there is a precedent for that in the form of popular MongoDB; besides familiarity, another point raised by Greg was ease of debugging queries issued via web interface using Javascript debugger built into modern browsers.</p><p><a href=https://skillsmatter.com/skillscasts/4045-greg-young>Functional Data Storage | SkillsCast</a></p></main><p class=date>15/03/2013</p><footer><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><hr>© Maciek Makowski 2010 &ndash; 2022. Content licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a></footer></body></html>